<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Fable and Cordova, a Mobile Story | codesuji</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Today’s article will look at combining Fable and Cordova to make a mobile application.  For those not familar with these projects, a little context may be helpful.  Fable compiles F# to Javascript and">
<meta name="keywords" content="F#,FSharp,Fable,Elmish,Cordova,Mobile">
<meta property="og:type" content="article">
<meta property="og:title" content="Fable and Cordova, a Mobile Story">
<meta property="og:url" content="http://codesuji.com/2019/06/18/Fable-and-Cordova/index.html">
<meta property="og:site_name" content="codesuji">
<meta property="og:description" content="Today’s article will look at combining Fable and Cordova to make a mobile application.  For those not familar with these projects, a little context may be helpful.  Fable compiles F# to Javascript and">
<meta property="og:locale" content="en">
<meta property="og:image" content="http://codesuji.com/images/cordova1/cordova1.png">
<meta property="og:updated_time" content="2019-06-19T22:19:52.620Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Fable and Cordova, a Mobile Story">
<meta name="twitter:description" content="Today’s article will look at combining Fable and Cordova to make a mobile application.  For those not familar with these projects, a little context may be helpful.  Fable compiles F# to Javascript and">
<meta name="twitter:image" content="http://codesuji.com/images/cordova1/cordova1.png">
    <link rel="stylesheet" href="css/fontawesome.css" type="text/css">
  
    <link rel="alternate" href="/atom.xml" title="codesuji" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">codesuji</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
          <a id="nav-share-link" class="nav-icon fa-solid fa-user" href="https://bsky.app/profile/codesuji.bsky.social" title="BlueSky" target="_blank"></a>
          <a id="nav-share-link" class="nav-icon fa-solid fa-user" href="https://hachyderm.io/@codesuji" title="Mastodon" target="_blank"></a>
          <a id="nav-rss-link" class="nav-icon fa-solid fa-rss" href="/atom.xml" title="RSS Feed"></a>
          <a id="nav-search-btn" class="nav-icon fa-solid fa-search" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://codesuji.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Fable-and-Cordova" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/06/18/Fable-and-Cordova/" class="article-date">
  <time datetime="2019-06-18T23:24:02.000Z" itemprop="datePublished">2019-06-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Fable and Cordova, a Mobile Story
    </h1>
  

 		<span class="post-count">Read Time: 9 minutes</span>
 	  </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Today’s article will look at combining <a href="https://fable.io/" target="_blank" rel="noopener">Fable</a> and <a href="https://cordova.apache.org/" target="_blank" rel="noopener">Cordova</a> to make a mobile application.  For those not familar with these projects, a little context may be helpful.  Fable compiles F# to Javascript and Cordova facilitates mobile app development using HTML and Javascript.  Throw in some <a href="https://elmish.github.io/" target="_blank" rel="noopener">Elmish</a>, and its a party.  Joining these technologies provides some unique possibilities.  Specifically this is an interesting way to leverage <a href="https://fsharp.org" target="_blank" rel="noopener">F#</a> for mobile development.  </p>
<a id="more"></a>
<p>The goal will be to make a very simple hello world mobile app.  There are a couple steps to get there, none of which are too complicated.  To follow along, you will need the following prerequisites.  Make sure you have <a href="https://www.microsoft.com/net/download/core" target="_blank" rel="noopener">.NET Core</a> and <a href="https://nodejs.org/en/" target="_blank" rel="noopener">NodeJs</a> installed.  Next, Cordova must be installed: <code>npm install -g cordova</code>.  Now that the building blocks are installed, it is time to get started.</p>
<p>First, the Cordova project will be created and initialized with the supported platforms.  <code>browser</code> is useful for the development process, while <code>android</code> is the real target.  If you’re of an iOS leaning, it can be the mobile target instead, or as an addition.  </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cordova create HelloWorld</span><br><span class="line">cd HelloWorld</span><br><span class="line">cordova platform add browser</span><br><span class="line">cordova platform add android</span><br><span class="line"># For iOS support: cordova platform add ios </span><br></pre></td></tr></table></figure>
<p>Second, the Fable part of the project needs created. From inside the main project, create a new F# app and add the basic Fable requirements.  The requirements come in two parts: dotnet and javascript.  For this sample app this will be all that is needed, although a fuller functional app may have more dependencies.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">dotnet new console -lang F# -n App</span><br><span class="line">cd App</span><br><span class="line">dotnet add package Fable.Core</span><br><span class="line">dotnet add package Fable.Elmish.React</span><br></pre></td></tr></table></figure>
<p>In the main project directory add the javascript dependencies.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install fable-compiler --save</span><br><span class="line">npm install fable-loader --save</span><br><span class="line">npm install @babel/core --save</span><br><span class="line">npm install react --save</span><br><span class="line">npm install react-dom --save</span><br></pre></td></tr></table></figure>
<p>Third, it is time to wire the projects together, which is where webpack enters the picture.  The Fable sample project already uses webpack, the config just needs some adjustments in order to publish the results to cordova (instead of a website).</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm install webpack  --save</span><br><span class="line">npm install webpack-cli  --save</span><br></pre></td></tr></table></figure>
<p>In the main project directory, webpack needs a config file <code>webpack.config.js</code> file with the following contents.  This tells webpack to process the newly create F# app project, and use the fable-loader to process files.  The destination bundle file generated is placed in Cordova’s <code>www/js</code> directory.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> path = <span class="built_in">require</span>(<span class="string">"path"</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  mode: <span class="string">"development"</span>,</span><br><span class="line">  entry: <span class="string">"./App/App.fsproj"</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.join(__dirname, <span class="string">"./www/js"</span>),</span><br><span class="line">    filename: <span class="string">"bundle.js"</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [&#123;</span><br><span class="line">      test: <span class="regexp">/\.fs(x|proj)?$/</span>,</span><br><span class="line">      use: <span class="string">"fable-loader"</span></span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The project directory should look something like this:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">HelloWorld</span><br><span class="line">├── App</span><br><span class="line">│   ├── App.fsproj</span><br><span class="line">│   └── Program.fs</span><br><span class="line">├── config.xml</span><br><span class="line">├── hooks</span><br><span class="line">├── node_modules</span><br><span class="line">├── package.json</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── platforms</span><br><span class="line">├── plugins</span><br><span class="line">├── webpack.config.js</span><br><span class="line">└── www</span><br><span class="line">    ├── css</span><br><span class="line">    ├── img</span><br><span class="line">    ├── index.html</span><br><span class="line">    └── js</span><br></pre></td></tr></table></figure>
<p>Now that the main project structures have been put into place, it is time to put the code together.  The Cordova project needs to be able to consume the generated Fable bundle created by webpack.  This is done by editing the Cordova index page <code>www/index.html</code>.  The contents can be reduced to below.  The key points here are the <code>elmish-app</code> div and the <code>bundle.js</code> include.</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Security-Policy"</span> <span class="attr">content</span>=<span class="string">"default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-eval'; style-src 'self' 'uns</span></span></span><br><span class="line"><span class="tag"><span class="string">  afe-inline'; media-src *; img-src 'self' data: content:;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"format-detection"</span> <span class="attr">content</span>=<span class="string">"telephone=no"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"msapplication-tap-highlight"</span> <span class="attr">content</span>=<span class="string">"no"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"initial-scale=1, width=device-width, viewport-fit=cover"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">type</span>=<span class="string">"text/css"</span> <span class="attr">href</span>=<span class="string">"css/index.css"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hello World<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"elmish-app"</span> <span class="attr">class</span>=<span class="string">"elmish-app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"cordova.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/index.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Cordova is set to accept some Fable code, now it is time to get to the F#.  The contents of <code>App/Program.fs</code> are below.  Since this is about wiring Fable to Cordova I don’t want to spend too much time on the specific F# code.  But the code takes a person’s name as input and replies with a Hello message.  To add a bit of mobile flavor, it also tracks current acceleration of the device using the <code>devicemotion</code> event, and publishes that to the screen as well.</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">module</span> App</span><br><span class="line"></span><br><span class="line"><span class="keyword">open</span> System</span><br><span class="line"><span class="keyword">open</span> Browser</span><br><span class="line"><span class="keyword">open</span> Browser.Types</span><br><span class="line"><span class="keyword">open</span> Elmish</span><br><span class="line"><span class="keyword">open</span> Elmish.React</span><br><span class="line"><span class="keyword">open</span> Fable.React</span><br><span class="line"><span class="keyword">open</span> Fable.React.Props</span><br><span class="line"><span class="keyword">open</span> Fable.Import</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">Model</span> </span>= </span><br><span class="line">  &#123; Name :string; Message :string; Acceleration :string &#125; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">type</span> <span class="title">Msg</span> </span>=</span><br><span class="line">| Greet <span class="keyword">of</span> string</span><br><span class="line">| DeviceMotion <span class="keyword">of</span> float * float * float</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> initModel() = </span><br><span class="line">  &#123; Model.Name = <span class="string">""</span>; Message = <span class="string">""</span>; Acceleration = <span class="string">""</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newMessage (name :string) = </span><br><span class="line">  sprintf <span class="string">"Hello %s, it is %s"</span> name (DateTime.Now.ToString(<span class="string">"yyyy-MM-dd"</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> newAcceleration x y z = </span><br><span class="line">  sprintf <span class="string">"Acceleration: (%0.3f, %0.3f, %0.3f)"</span> x y z</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> updateModel (msg :Msg) (model :Model) =</span><br><span class="line">    <span class="keyword">match</span> msg <span class="keyword">with</span></span><br><span class="line">    | Greet(name)           -&gt; &#123; model <span class="keyword">with</span> </span><br><span class="line">                                  Name = name; </span><br><span class="line">                                  Message = newMessage name &#125;</span><br><span class="line">    | DeviceMotion(x, y, z) -&gt; &#123; model <span class="keyword">with</span> </span><br><span class="line">                                  Acceleration = newAcceleration x y z &#125;</span><br><span class="line"><span class="keyword">let</span> view (model :Model) dispatch =</span><br><span class="line">  div []</span><br><span class="line">    [</span><br><span class="line">      div []</span><br><span class="line">        [</span><br><span class="line">          str <span class="string">"My name is:"</span></span><br><span class="line">          input </span><br><span class="line">            [ </span><br><span class="line">              AutoFocus <span class="keyword">true</span></span><br><span class="line">              OnInput (<span class="keyword">fun</span> e -&gt; dispatch (Greet ((e.target:?&gt;HTMLInputElement).value)))</span><br><span class="line">              Value (model.Name)</span><br><span class="line">            ]</span><br><span class="line">        ]</span><br><span class="line">      div []</span><br><span class="line">        [</span><br><span class="line">          str model.Message</span><br><span class="line">          br []</span><br><span class="line">          str model.Acceleration</span><br><span class="line">        ]</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> deviceMotion initial = </span><br><span class="line">    <span class="keyword">let</span> sub dispatch =</span><br><span class="line">        window.addEventListener(<span class="string">"devicemotion"</span>, <span class="keyword">fun</span> e -&gt;</span><br><span class="line">          <span class="keyword">let</span> e' = e :?&gt; DeviceMotionEvent</span><br><span class="line">          dispatch (DeviceMotion (e'.acceleration.x, e'.acceleration.y, e'.acceleration.z)))</span><br><span class="line">    Cmd.ofSub sub</span><br><span class="line"></span><br><span class="line">Program.mkSimple initModel updateModel view</span><br><span class="line">|&gt; Program.withReactBatched <span class="string">"elmish-app"</span></span><br><span class="line">|&gt; Program.withSubscription deviceMotion</span><br><span class="line">|&gt; Program.withConsoleTrace</span><br><span class="line">|&gt; Program.run</span><br></pre></td></tr></table></figure>
<p>All that is left now is to build and run the app.  There are a couple things to keep track of: building the Fable app with webpack, running the app in the browser for development, and building.  The commands below touch the surface of development and building, but they at least get you started. </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># Run webpack on the fable app</span><br><span class="line">npx webpack</span><br><span class="line"></span><br><span class="line"># Run cordova in the browser</span><br><span class="line">cordova run browser</span><br><span class="line"></span><br><span class="line"># Build and run on the phone or emulator</span><br><span class="line">cordova build android</span><br><span class="line">cordova run android</span><br><span class="line"></span><br><span class="line"># Install it on the phone</span><br><span class="line">adb install </span><br></pre></td></tr></table></figure>
<p>A running app looks like this:</p>
<p><img src="/images/cordova1/cordova1.png" alt="Cordova App"></p>
<p>Being able to build is great, but development can be cumbersome without the ability to watch and auto-build file changes.  Taking the next step, let’s add some convenience to the process.  Add the following to <code>package.json</code>.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"scripts"</span>: &#123;</span><br><span class="line">  ...</span><br><span class="line">  <span class="string">"watch"</span>: <span class="string">"npx webpack -w"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>The above command is just the interface, it needs some modifications to <code>webpack.config.js</code> to perform the desired actions. The below changes wire into the <code>afterEmit</code> hook to refresh the cordova browser (and start the local service if not already started).  The <code>watchOptions</code> aren’t strictly needed for this, but it helps to stop rebuild spamming, and lower file watch needs.  These values can be tuned more for specific needs.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> exec = <span class="built_in">require</span>(<span class="string">"child_process"</span>).exec;</span><br><span class="line"><span class="keyword">var</span> cordovaServerStarted = <span class="literal">false</span>;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  ...</span><br><span class="line">  watchOptions: &#123;</span><br><span class="line">    aggregateTimeout: <span class="number">500</span>,</span><br><span class="line">    ignored: [ <span class="string">"node_modules"</span> ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    &#123;</span><br><span class="line">      apply: <span class="function">(<span class="params">compiler</span>) =&gt;</span> &#123;</span><br><span class="line">        compiler.hooks.afterEmit.tap(<span class="string">"AfterEmitPlugin"</span>, (_compilation) =&gt; &#123;</span><br><span class="line">          exec(<span class="string">"cordova prepare browser"</span>, (err, stdout, stderr) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (stdout) &#123; process.stdout.write(stdout); &#125;</span><br><span class="line">            <span class="keyword">if</span> (stderr) &#123; process.stderr.write(stderr); &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">  </span><br><span class="line">          <span class="keyword">if</span> (!cordovaServerStarted) &#123;</span><br><span class="line">            cordovaServerStarted = <span class="literal">true</span>;</span><br><span class="line">            exec(<span class="string">"cordova run browser"</span>, (err, stdout, stderr) =&gt; &#123;</span><br><span class="line">              <span class="keyword">if</span> (stdout) &#123; process.stdout.write(stdout); &#125;</span><br><span class="line">              <span class="keyword">if</span> (stderr) &#123; process.stderr.write(stderr); &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>Now, a simple <code>npm run watch</code> will start the Cordova browser, watch for application updates, and auto-build as files are edited.  The development process just got way easier.  As a reminder, this is just a sample; more goes into properly building everything out.  With that said, this provides a good starting point to getting F# running on mobile using Cordova.  I hope you found this useful and/or interesting.  Until next time…</p>

        <div class="related-posts-box">
        Related Posts:<ul class="related-posts"><li class="related-posts-item"><a class="related-posts-link" href="/2016/12/13/F-and-Dynamic-Time-Warping/">F# and Dynamic Time Warping</a></li><li class="related-posts-item"><a class="related-posts-link" href="/2021/04/23/F-AC3-Solving/">AC-3 Constraint Solving with F#</a></li><li class="related-posts-item"><a class="related-posts-link" href="/2017/05/20/F-and-EmguCV/">Facial Recognition using F# and EmguCV</a></li></ul>        </div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://codesuji.com/2019/06/18/Fable-and-Cordova/" data-id="clg8exoef006qw5mwr1sedyom" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Cordova/">Cordova</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Elmish/">Elmish</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/F/">F#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FSharp/">FSharp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Fable/">Fable</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mobile/">Mobile</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/08/14/Nyquist-Keyboard/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Nyquist Keyboard Build
        
      </div>
    </a>
  
  
    <a href="/2019/05/24/F-and-MLNet-Anomaly/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Taking Stock of Anomalies with F# and ML.NET</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/NET-Core/" style="font-size: 17.27px;">.NET Core</a> <a href="/tags/Accord-NET/" style="font-size: 14.55px;">Accord.NET</a> <a href="/tags/Algorithms/" style="font-size: 15.45px;">Algorithms</a> <a href="/tags/Analytics/" style="font-size: 13.64px;">Analytics</a> <a href="/tags/Audio/" style="font-size: 10px;">Audio</a> <a href="/tags/Benchmarking/" style="font-size: 10.91px;">Benchmarking</a> <a href="/tags/Chiron/" style="font-size: 10px;">Chiron</a> <a href="/tags/Classification/" style="font-size: 10.91px;">Classification</a> <a href="/tags/Cognitive-Services/" style="font-size: 10.91px;">Cognitive Services</a> <a href="/tags/Compiler/" style="font-size: 12.73px;">Compiler</a> <a href="/tags/Computer-Vision/" style="font-size: 10.91px;">Computer Vision</a> <a href="/tags/Cordova/" style="font-size: 10px;">Cordova</a> <a href="/tags/DTW/" style="font-size: 13.64px;">DTW</a> <a href="/tags/Data/" style="font-size: 18.18px;">Data</a> <a href="/tags/Database/" style="font-size: 12.73px;">Database</a> <a href="/tags/Decision-Trees/" style="font-size: 10.91px;">Decision Trees</a> <a href="/tags/Deedle/" style="font-size: 10px;">Deedle</a> <a href="/tags/Delegate/" style="font-size: 10px;">Delegate</a> <a href="/tags/Detection/" style="font-size: 10px;">Detection</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Dynamic-Time-Warping/" style="font-size: 12.73px;">Dynamic Time Warping</a> <a href="/tags/EEG/" style="font-size: 10px;">EEG</a> <a href="/tags/Edges/" style="font-size: 10px;">Edges</a> <a href="/tags/Education/" style="font-size: 10px;">Education</a> <a href="/tags/Elmish/" style="font-size: 10px;">Elmish</a> <a href="/tags/EmguCV/" style="font-size: 10px;">EmguCV</a> <a href="/tags/Entropy/" style="font-size: 10px;">Entropy</a> <a href="/tags/F/" style="font-size: 20px;">F#</a> <a href="/tags/FParsec/" style="font-size: 11.82px;">FParsec</a> <a href="/tags/FSAdvent/" style="font-size: 10px;">FSAdvent</a> <a href="/tags/FSharp/" style="font-size: 20px;">FSharp</a> <a href="/tags/Fable/" style="font-size: 10px;">Fable</a> <a href="/tags/Faces/" style="font-size: 10.91px;">Faces</a> <a href="/tags/Filters/" style="font-size: 10px;">Filters</a> <a href="/tags/Http/" style="font-size: 10.91px;">Http</a> <a href="/tags/Images/" style="font-size: 11.82px;">Images</a> <a href="/tags/Ionide/" style="font-size: 10px;">Ionide</a> <a href="/tags/Kaggle/" style="font-size: 11.82px;">Kaggle</a> <a href="/tags/Keyboard/" style="font-size: 12.73px;">Keyboard</a> <a href="/tags/Legos/" style="font-size: 10.91px;">Legos</a> <a href="/tags/Logging/" style="font-size: 10px;">Logging</a> <a href="/tags/MLNet/" style="font-size: 16.36px;">MLNet</a> <a href="/tags/MSIL/" style="font-size: 11.82px;">MSIL</a> <a href="/tags/Machine-Learning/" style="font-size: 19.09px;">Machine Learning</a> <a href="/tags/MathNet/" style="font-size: 10px;">MathNet</a> <a href="/tags/Messaging/" style="font-size: 10px;">Messaging</a> <a href="/tags/Mobile/" style="font-size: 10px;">Mobile</a> <a href="/tags/Mono/" style="font-size: 10px;">Mono</a> <a href="/tags/Morse-Code/" style="font-size: 10px;">Morse Code</a> <a href="/tags/Mqtt/" style="font-size: 11.82px;">Mqtt</a> <a href="/tags/Nix/" style="font-size: 10px;">Nix</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/Optimization/" style="font-size: 10px;">Optimization</a> <a href="/tags/Parsing/" style="font-size: 11.82px;">Parsing</a> <a href="/tags/Performance/" style="font-size: 12.73px;">Performance</a> <a href="/tags/Presentations/" style="font-size: 10px;">Presentations</a> <a href="/tags/Propagator/" style="font-size: 10px;">Propagator</a> <a href="/tags/Racket/" style="font-size: 10px;">Racket</a> <a href="/tags/Regression/" style="font-size: 10px;">Regression</a> <a href="/tags/Rekognition/" style="font-size: 10px;">Rekognition</a> <a href="/tags/Robotics/" style="font-size: 10px;">Robotics</a> <a href="/tags/Rust/" style="font-size: 10px;">Rust</a> <a href="/tags/STEM/" style="font-size: 10.91px;">STEM</a> <a href="/tags/Scoring/" style="font-size: 10px;">Scoring</a> <a href="/tags/Search/" style="font-size: 10.91px;">Search</a> <a href="/tags/Serialization/" style="font-size: 10px;">Serialization</a> <a href="/tags/SignalR/" style="font-size: 10px;">SignalR</a> <a href="/tags/Signals/" style="font-size: 12.73px;">Signals</a> <a href="/tags/Similarity/" style="font-size: 10.91px;">Similarity</a> <a href="/tags/Sound/" style="font-size: 10px;">Sound</a> <a href="/tags/Statistics/" style="font-size: 12.73px;">Statistics</a> <a href="/tags/Text/" style="font-size: 13.64px;">Text</a> <a href="/tags/Timeseries/" style="font-size: 10.91px;">Timeseries</a> <a href="/tags/Tips/" style="font-size: 12.73px;">Tips</a> <a href="/tags/Tools/" style="font-size: 10px;">Tools</a> <a href="/tags/Translation/" style="font-size: 10px;">Translation</a> <a href="/tags/Types/" style="font-size: 10px;">Types</a> <a href="/tags/VS-Code/" style="font-size: 10px;">VS Code</a> <a href="/tags/Web/" style="font-size: 10.91px;">Web</a> <a href="/tags/Webapi/" style="font-size: 10.91px;">Webapi</a> <a href="/tags/admin/" style="font-size: 10.91px;">admin</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/05/24/Distinct-Counting-in-F/">Estimating Distinct Element Counts with F#</a>
          </li>
        
          <li>
            <a href="/2024/05/21/F-and-Anthropic/">Harnessing the Anthropic API with F#</a>
          </li>
        
          <li>
            <a href="/2023/09/23/F-Flurl/">Using F# and Flurl</a>
          </li>
        
          <li>
            <a href="/2023/04/08/VectorSearch-F-1/">Vector Search using F#</a>
          </li>
        
          <li>
            <a href="/2023/03/07/Json-Bakeoff/">The Great Json Bake-Off</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2024 codesuji.com<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>