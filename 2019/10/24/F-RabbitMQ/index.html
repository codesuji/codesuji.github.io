<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Utilizing RabbitMQ with F# | codesuji</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Today is a overview of how to use the RabbitMQ message broker with F#.  The RabbitMQ tutorials have a lot of great getting started information.  Its .NET section focuses on C#, so I wanted to provide">
<meta name="keywords" content="F#,FSharp,Messaging">
<meta property="og:type" content="article">
<meta property="og:title" content="Utilizing RabbitMQ with F#">
<meta property="og:url" content="http://codesuji.com/2019/10/24/F-RabbitMQ/index.html">
<meta property="og:site_name" content="codesuji">
<meta property="og:description" content="Today is a overview of how to use the RabbitMQ message broker with F#.  The RabbitMQ tutorials have a lot of great getting started information.  Its .NET section focuses on C#, so I wanted to provide">
<meta property="og:locale" content="en">
<meta property="og:updated_time" content="2019-10-25T19:34:57.941Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Utilizing RabbitMQ with F#">
<meta name="twitter:description" content="Today is a overview of how to use the RabbitMQ message broker with F#.  The RabbitMQ tutorials have a lot of great getting started information.  Its .NET section focuses on C#, so I wanted to provide">
  
    <link rel="alternate" href="/atom.xml" title="codesuji" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-89982547-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">codesuji</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://codesuji.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-F-RabbitMQ" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/10/24/F-RabbitMQ/" class="article-date">
  <time datetime="2019-10-25T00:01:17.000Z" itemprop="datePublished">2019-10-24</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Utilizing RabbitMQ with F#
    </h1>
  

 		<span class="post-count">Read Time: 12 minutes</span>
 	  </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Today is a overview of how to use the <a href="https://www.rabbitmq.com/" target="_blank" rel="noopener">RabbitMQ</a> message broker with <a href="https://fsharp.org" target="_blank" rel="noopener">F#</a>.  The RabbitMQ tutorials have a lot of great <a href="https://www.rabbitmq.com/getstarted.html" target="_blank" rel="noopener">getting started</a> information.  Its .NET section focuses on C#, so I wanted to provide an F# angle to the general use cases.<br><a id="more"></a></p>
<p>There are a several different use cases for leveraging RabbitMQ.  My examples will track against most of the tutorials, but with my own twist on the examples.  The producer will generate and publish a datastream of floats using RabbitMQ.  Depending on the specific use cases, consumers will filter and processes messages out of RabbitMQ.  I want all of these to be singular files, so I also leverage Async workflows to operate both producer and consumers in the same process.  To get started, you will need to have <a href="https://www.microsoft.com/net/download/core" target="_blank" rel="noopener">.NET Core</a> installed.  Once this is complete the application can be setup.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">dotnet new console -lang F# -n RabbitMQ</span><br><span class="line">cd RabbitMQ </span><br><span class="line">dotnet new package RabbitMQ.Client --version 5.1.2</span><br></pre></td></tr></table></figure>
<p>Based on the types of interaction, I’ve broken the post into sections.  For quick reference, the sections are:</p>
<p><a href="#work_queues">Work Queues</a><br><a href="#publish_subscribe">Publish/Subscribe</a><br><a href="#routing">Routing</a><br><a href="#topics">Topics</a></p>
<p>There is a lot of repetition, but I want each example to stand on it’s own.  In all of the below examples, the same libraries and namespaces are used.  So this will be a singular header for all examples.  The primary difference between the following examples is the exchange, queue, and routing key definitions and usages. </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">open</span> System</span><br><span class="line"><span class="keyword">open</span> System.Text</span><br><span class="line"><span class="keyword">open</span> System.Threading</span><br><span class="line"><span class="keyword">open</span> RabbitMQ.Client</span><br><span class="line"><span class="keyword">open</span> RabbitMQ.Client.Events</span><br></pre></td></tr></table></figure>
<h2 id="Work-Queues"><a href="#Work-Queues" class="headerlink" title="Work Queues "></a>Work Queues <a name="work_queue"></a></h2><p>For this example, the interaction is pretty direct.  The producer takes it’s datastream and publishes it to the defined queue every 500 milliseconds.  The consumer(s) will read from the same queue, processing data as available.  The consumer is setup in a similar fashion to the producer; they both need a connexionand channel.  It does has the extra need to setup a handler for receiving messages.  Once it is all setup, the consumer must be started for processing.  The final piece is running the producer and consumer workflows.  Since this is a quick test, I’ll run everything for 5 seconds, then kill the workflow. </p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> producer hostname queue routingKey (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  <span class="keyword">let</span> result = channel.QueueDeclare(queue = queue, durable = <span class="keyword">false</span>, exclusive = <span class="keyword">false</span>, autoDelete = <span class="keyword">false</span>, arguments = <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rand = Random()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">let</span> message = sprintf <span class="string">"%f"</span> (rand.NextDouble())</span><br><span class="line">    <span class="keyword">let</span> body = Encoding.UTF8.GetBytes(message)</span><br><span class="line">    printfn <span class="string">"publish     : %s"</span> message</span><br><span class="line">    channel.BasicPublish(exchange = <span class="string">""</span>, routingKey = routingKey, basicProperties = <span class="keyword">null</span>, body = body)</span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> consumer id hostname queue (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  <span class="keyword">let</span> result = channel.QueueDeclare(queue = queue, durable = <span class="keyword">false</span>, exclusive = <span class="keyword">false</span>, autoDelete = <span class="keyword">false</span>, arguments = <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumer = EventingBasicConsumer(channel)</span><br><span class="line">  consumer.Received.AddHandler(<span class="keyword">new</span> EventHandler&lt;BasicDeliverEventArgs&gt;(<span class="keyword">fun</span> sender (data:BasicDeliverEventArgs) -&gt; </span><br><span class="line">    <span class="keyword">let</span> body = data.Body</span><br><span class="line">    <span class="keyword">let</span> message = Encoding.UTF8.GetString(body)</span><br><span class="line">    printfn <span class="string">"consumed [%s]: %s"</span> id message))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumeResult = channel.BasicConsume(queue = queue, autoAck = <span class="keyword">true</span>, consumer = consumer)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">[&lt;EntryPoint&gt;]</span></span><br><span class="line"><span class="keyword">let</span> main argv =</span><br><span class="line">  <span class="keyword">let</span> host = <span class="string">"localhost"</span></span><br><span class="line">  <span class="keyword">let</span> queue = <span class="string">"data_stream"</span></span><br><span class="line">  <span class="keyword">let</span> routingKey = <span class="string">"data_stream"</span></span><br><span class="line"></span><br><span class="line">  async &#123;</span><br><span class="line">    <span class="keyword">let</span> token = <span class="keyword">new</span> CancellationTokenSource()</span><br><span class="line">    token.CancelAfter <span class="number">5000</span></span><br><span class="line"></span><br><span class="line">    seq &#123; </span><br><span class="line">      (producer host queue routingKey token); </span><br><span class="line">      (consumer <span class="string">"1"</span> host queue token); </span><br><span class="line">      (consumer <span class="string">"2"</span> host queue token) &#125; </span><br><span class="line">    |&gt; Async.Parallel</span><br><span class="line">    |&gt; Async.RunSynchronously |&gt; ignore</span><br><span class="line">  &#125; |&gt; Async.RunSynchronously</span><br><span class="line"> </span><br><span class="line">  <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>The output shows the two consumers picking data off the data_stream queue.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">publish     : 0.750373</span><br><span class="line">consumed [1]: 0.750373</span><br><span class="line">publish     : 0.130004</span><br><span class="line">consumed [2]: 0.130004</span><br><span class="line">publish     : 0.279026</span><br><span class="line">consumed [1]: 0.279026</span><br><span class="line">publish     : 0.709584</span><br><span class="line">consumed [2]: 0.709584</span><br><span class="line">publish     : 0.573295</span><br><span class="line">consumed [1]: 0.573295</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="Publish-Subscribe"><a href="#Publish-Subscribe" class="headerlink" title="Publish/Subscribe "></a>Publish/Subscribe <a name="publish_subscribe"></a></h2><p>In contrast to the previous example, using a <code>Fanout</code> exchange type distributes the published message to all subscribed consumers.  Of note, here I use exchange and routing key.  The consumer also needs a queue binding, that wasn’t required in the previous example.</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> producer hostname exchange routingKey (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  channel.ExchangeDeclare(exchange = exchange, ``<span class="class"><span class="keyword">type</span>`` </span>= ExchangeType.Fanout, durable = <span class="keyword">false</span>, autoDelete = <span class="keyword">false</span>, arguments = <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rand = Random()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">let</span> message = sprintf <span class="string">"%f"</span> (rand.NextDouble())</span><br><span class="line">    <span class="keyword">let</span> body = Encoding.UTF8.GetBytes(message)</span><br><span class="line">    printfn <span class="string">"publish: %s"</span> message</span><br><span class="line">    channel.BasicPublish(exchange = exchange, routingKey = routingKey, basicProperties = <span class="keyword">null</span>, body = body)</span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> consumer id hostname exchange routingKey (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  channel.ExchangeDeclare(exchange = exchange, ``<span class="class"><span class="keyword">type</span>`` </span>= ExchangeType.Fanout)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> queueName = channel.QueueDeclare().QueueName</span><br><span class="line">  channel.QueueBind(queue = queueName, exchange = exchange, routingKey = routingKey);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumer = EventingBasicConsumer(channel)</span><br><span class="line">  consumer.Received.AddHandler(<span class="keyword">new</span> EventHandler&lt;BasicDeliverEventArgs&gt;(<span class="keyword">fun</span> sender (data:BasicDeliverEventArgs) -&gt; </span><br><span class="line">    <span class="keyword">let</span> body = data.Body</span><br><span class="line">    <span class="keyword">let</span> message = Encoding.UTF8.GetString(body)</span><br><span class="line">    printfn <span class="string">"consumed [%s]: %A"</span> id message))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumeResult = channel.BasicConsume(queue = <span class="string">""</span>, autoAck = <span class="keyword">true</span>, consumer = consumer)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">[&lt;EntryPoint&gt;]</span></span><br><span class="line"><span class="keyword">let</span> main argv =</span><br><span class="line">  <span class="keyword">let</span> host = <span class="string">"localhost"</span></span><br><span class="line">  <span class="keyword">let</span> exchange = <span class="string">"pubsub_exchange"</span></span><br><span class="line">  <span class="keyword">let</span> routingKey = <span class="string">"pubsub_route"</span></span><br><span class="line"></span><br><span class="line">  async &#123;</span><br><span class="line">    <span class="keyword">let</span> token = <span class="keyword">new</span> CancellationTokenSource()</span><br><span class="line">    token.CancelAfter <span class="number">5000</span></span><br><span class="line"></span><br><span class="line">    seq &#123; </span><br><span class="line">      (producer host exchange routingKey token); </span><br><span class="line">      (consumer <span class="string">"1"</span> host exchange routingKey token); </span><br><span class="line">      (consumer <span class="string">"2"</span> host exchange routingKey token) &#125; </span><br><span class="line">    |&gt; Async.Parallel</span><br><span class="line">    |&gt; Async.RunSynchronously |&gt; ignore</span><br><span class="line"></span><br><span class="line">    printfn <span class="string">"workflow complete"</span></span><br><span class="line">  &#125; |&gt; Async.RunSynchronously</span><br><span class="line"> </span><br><span class="line">  <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>The below results show each consumer processing every message.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">publish: 0.178846</span><br><span class="line">consumed [1]: &quot;0.178846&quot;</span><br><span class="line">consumed [2]: &quot;0.178846&quot;</span><br><span class="line">publish: 0.734746</span><br><span class="line">consumed [1]: &quot;0.734746&quot;</span><br><span class="line">consumed [2]: &quot;0.734746&quot;</span><br><span class="line">publish: 0.171448</span><br><span class="line">consumed [2]: &quot;0.171448&quot;</span><br><span class="line">consumed [1]: &quot;0.171448&quot;</span><br><span class="line">publish: 0.890113</span><br><span class="line">consumed [2]: &quot;0.890113&quot;</span><br><span class="line">consumed [1]: &quot;0.890113&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="Routing"><a href="#Routing" class="headerlink" title="Routing "></a>Routing <a name="routing"></a></h2><p>For this example, if the first digit is even or odd, the producer will route it to the appropriate ‘even’ or ‘odd’ route.  Two consumers are setup, one to listen for even messages, and the other to listen to odd messages.</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> producer hostname exchange (routingKeys:string list) (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  channel.ExchangeDeclare(exchange = exchange, ``<span class="class"><span class="keyword">type</span>`` </span>= ExchangeType.Direct, durable = <span class="keyword">false</span>, autoDelete = <span class="keyword">false</span>, arguments = <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rand = Random()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">let</span> data = rand.NextDouble()</span><br><span class="line">    <span class="keyword">let</span> message = sprintf <span class="string">"%f"</span> data</span><br><span class="line">    <span class="keyword">let</span> body = Encoding.UTF8.GetBytes(message)</span><br><span class="line">    printfn <span class="string">"publish     : %s"</span> message</span><br><span class="line">    <span class="keyword">let</span> routingKey = <span class="keyword">if</span> int ((data * <span class="number">10.</span>)) % <span class="number">2</span> = <span class="number">0</span> </span><br><span class="line">                     <span class="keyword">then</span> routingKeys.[<span class="number">0</span>] </span><br><span class="line">                     <span class="keyword">else</span> routingKeys.[<span class="number">1</span>]</span><br><span class="line">    channel.BasicPublish(exchange = exchange, routingKey = routingKey, basicProperties = <span class="keyword">null</span>, body = body)</span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> consumer id hostname exchange routingKey (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  channel.ExchangeDeclare(exchange = exchange, ``<span class="class"><span class="keyword">type</span>`` </span>= ExchangeType.Direct)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> queueName = channel.QueueDeclare().QueueName</span><br><span class="line">  channel.QueueBind(queue = queueName, exchange = exchange, routingKey = routingKey);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumer = EventingBasicConsumer(channel)</span><br><span class="line">  consumer.Received.AddHandler(<span class="keyword">new</span> EventHandler&lt;BasicDeliverEventArgs&gt;(<span class="keyword">fun</span> sender (data:BasicDeliverEventArgs) -&gt; </span><br><span class="line">    <span class="keyword">let</span> body = data.Body</span><br><span class="line">    <span class="keyword">let</span> message = Encoding.UTF8.GetString(body)</span><br><span class="line">    printfn <span class="string">"consumed [%s]: %s"</span> id message))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumeResult = channel.BasicConsume(queue = <span class="string">""</span>, autoAck = <span class="keyword">true</span>, consumer = consumer)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">[&lt;EntryPoint&gt;]</span></span><br><span class="line"><span class="keyword">let</span> main argv =</span><br><span class="line">  <span class="keyword">let</span> host = <span class="string">"localhost"</span></span><br><span class="line">  <span class="keyword">let</span> exchange = <span class="string">"routing_exchange"</span></span><br><span class="line">  <span class="keyword">let</span> routingKey0 = <span class="string">"even"</span></span><br><span class="line">  <span class="keyword">let</span> routingKey1 = <span class="string">"odd"</span></span><br><span class="line"></span><br><span class="line">  async &#123;</span><br><span class="line">    <span class="keyword">let</span> token = <span class="keyword">new</span> CancellationTokenSource()</span><br><span class="line">    token.CancelAfter <span class="number">5000</span></span><br><span class="line"></span><br><span class="line">    seq &#123; </span><br><span class="line">      (producer host exchange [routingKey0; routingKey1] token); </span><br><span class="line">      (consumer <span class="string">"0"</span> host exchange routingKey0 token);  </span><br><span class="line">      (consumer <span class="string">"1"</span> host exchange routingKey1 token) &#125;</span><br><span class="line">    |&gt; Async.Parallel</span><br><span class="line">    |&gt; Async.RunSynchronously |&gt; ignore</span><br><span class="line">  &#125; |&gt; Async.RunSynchronously</span><br><span class="line"> </span><br><span class="line">  <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>The below results show consumer 0 filtering on even messages and consumer 1 filtering on odd messages.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">publish: 0.910740</span><br><span class="line">consumed [1]: 0.910740</span><br><span class="line">publish     : 0.650291</span><br><span class="line">consumed [0]: 0.650291</span><br><span class="line">publish     : 0.128357</span><br><span class="line">consumed [1]: 0.128357</span><br><span class="line">publish     : 0.750614</span><br><span class="line">consumed [1]: 0.750614</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<h2 id="Topics"><a href="#Topics" class="headerlink" title="Topics "></a>Topics <a name="topics"></a></h2><p>The <code>Topic</code> exchange type provides a mechanism for consumers to apply advanced filtering to the messages they process.  In this example, the same even/odd producer is used.  The consumers use routing keys that support wildcards.  <code>all.*</code> will process messages that start with ‘all’, while <code>*.odd</code> will process messages ending in ‘odd’.  This functionality allows you to setup topics in such a fashion to provided more advanced consumer processing.</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> producer hostname exchange (routingKeys:string list) (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  channel.ExchangeDeclare(exchange = exchange, ``<span class="class"><span class="keyword">type</span>`` </span>= ExchangeType.Topic, durable = <span class="keyword">false</span>, autoDelete = <span class="keyword">false</span>, arguments = <span class="keyword">null</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> rand = Random()</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    <span class="keyword">let</span> data = rand.NextDouble()</span><br><span class="line">    <span class="keyword">let</span> message = sprintf <span class="string">"%f"</span> data</span><br><span class="line">    <span class="keyword">let</span> body = Encoding.UTF8.GetBytes(message)</span><br><span class="line">    printfn <span class="string">"publish: %s"</span> message</span><br><span class="line">    <span class="keyword">let</span> routingKey = <span class="keyword">if</span> int ((data * <span class="number">10.</span>)) % <span class="number">2</span> = <span class="number">0</span> </span><br><span class="line">                     <span class="keyword">then</span> routingKeys.[<span class="number">0</span>] </span><br><span class="line">                     <span class="keyword">else</span> routingKeys.[<span class="number">1</span>]</span><br><span class="line">    channel.BasicPublish(exchange = exchange, routingKey = routingKey, basicProperties = <span class="keyword">null</span>, body = body)</span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> consumer id hostname exchange routingKey (token: CancellationTokenSource) = async &#123;</span><br><span class="line">  <span class="keyword">let</span> factory = ConnectionFactory(HostName = hostname)</span><br><span class="line">  <span class="keyword">use</span> connection = factory.CreateConnection()</span><br><span class="line">  <span class="keyword">use</span> channel = connection.CreateModel()</span><br><span class="line">  channel.ExchangeDeclare(exchange = exchange, ``<span class="class"><span class="keyword">type</span>`` </span>= ExchangeType.Topic) <span class="comment">//, durable = false, autoDelete = false, arguments = null)</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> queueName = channel.QueueDeclare().QueueName</span><br><span class="line">  channel.QueueBind(queue = queueName, exchange = exchange, routingKey = routingKey);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumer = EventingBasicConsumer(channel)</span><br><span class="line">  consumer.Received.AddHandler(<span class="keyword">new</span> EventHandler&lt;BasicDeliverEventArgs&gt;(<span class="keyword">fun</span> sender (data:BasicDeliverEventArgs) -&gt; </span><br><span class="line">    <span class="keyword">let</span> body = data.Body</span><br><span class="line">    <span class="keyword">let</span> message = Encoding.UTF8.GetString(body)</span><br><span class="line">    printfn <span class="string">"consumed [%s]: %A"</span> id message))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> consumeResult = channel.BasicConsume(queue = <span class="string">""</span>, autoAck = <span class="keyword">true</span>, consumer = consumer)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> not token.IsCancellationRequested <span class="keyword">do</span></span><br><span class="line">    Thread.Sleep(<span class="number">500</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">[&lt;EntryPoint&gt;]</span></span><br><span class="line"><span class="keyword">let</span> main argv =</span><br><span class="line">  <span class="keyword">let</span> host = <span class="string">"localhost"</span></span><br><span class="line">  <span class="keyword">let</span> exchange = <span class="string">"topic_exchange"</span></span><br><span class="line">  <span class="keyword">let</span> routingKey0 = <span class="string">"all.even"</span></span><br><span class="line">  <span class="keyword">let</span> routingKey1 = <span class="string">"all.odd"</span></span><br><span class="line"></span><br><span class="line">  async &#123;</span><br><span class="line">    <span class="keyword">let</span> token = <span class="keyword">new</span> CancellationTokenSource()</span><br><span class="line">    token.CancelAfter <span class="number">5000</span></span><br><span class="line"></span><br><span class="line">    seq &#123; </span><br><span class="line">      (producer host exchange [routingKey0; routingKey1] token); </span><br><span class="line">      (consumer <span class="string">"0"</span> host exchange routingKey0 token);  </span><br><span class="line">      (consumer <span class="string">"1"</span> host exchange routingKey1 token);</span><br><span class="line">      (consumer <span class="string">"2"</span> host exchange <span class="string">"all.*"</span> token)  </span><br><span class="line">      (consumer <span class="string">"3"</span> host exchange <span class="string">"*.even"</span> token)  </span><br><span class="line">    &#125;</span><br><span class="line">    |&gt; Async.Parallel</span><br><span class="line">    |&gt; Async.RunSynchronously |&gt; ignore</span><br><span class="line">  &#125; |&gt; Async.RunSynchronously</span><br><span class="line"> </span><br><span class="line">  <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>The below results show consumers pulling their appropriately filtered messages.  Even messages are processed by consumers 0, 2, and 3.  Odd messages are processed by consumers 1 and 2.</p>
<figure class="highlight fsharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">publish     : <span class="number">0.789320</span></span><br><span class="line">consumed [<span class="number">2</span>]: <span class="number">0.789320</span></span><br><span class="line">consumed [<span class="number">1</span>]: <span class="number">0.789320</span></span><br><span class="line">publish     : <span class="number">0.163861</span></span><br><span class="line">consumed [<span class="number">1</span>]: <span class="number">0.163861</span></span><br><span class="line">consumed [<span class="number">2</span>]: <span class="number">0.163861</span></span><br><span class="line">publish     : <span class="number">0.256774</span></span><br><span class="line">consumed [<span class="number">0</span>]: <span class="number">0.256774</span></span><br><span class="line">consumed [<span class="number">3</span>]: <span class="number">0.256774</span></span><br><span class="line">consumed [<span class="number">2</span>]: <span class="number">0.256774</span></span><br><span class="line">publish     : <span class="number">0.273446</span></span><br><span class="line">consumed [<span class="number">3</span>]: <span class="number">0.273446</span></span><br><span class="line">consumed [<span class="number">2</span>]: <span class="number">0.273446</span></span><br><span class="line">consumed [<span class="number">0</span>]: <span class="number">0.273446</span></span><br><span class="line">...</span><br></pre></td></tr></table></figure>
<p>This has been a quick overview in how RabbitMQ can be used with F#.  It really only touches the surface of what can be done.  Until next time.</p>

        <div class="related-posts-box">
        Related Posts:<ul class="related-posts"><li class="related-posts-item"><a class="related-posts-link" href="/2017/12/26/The-Power-of-the-Forward-Pipe/">The Power of the Forward Pipe</a></li><li class="related-posts-item"><a class="related-posts-link" href="/2019/10/13/F-Performance-Profiling/">Performance Profiling F#</a></li><li class="related-posts-item"><a class="related-posts-link" href="/2017/08/20/F-and-Serilog/">F# and Serilog</a></li></ul>        </div>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://codesuji.com/2019/10/24/F-RabbitMQ/" data-id="ckgqhw6vr0048l1mwpjsn0ekk" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/F/">F#</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/FSharp/">FSharp</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Messaging/">Messaging</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/11/02/Handwired-Preonic/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Handwired Preonic
        
      </div>
    </a>
  
  
    <a href="/2019/10/13/F-Performance-Profiling/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Performance Profiling F#</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/NET-Core/" style="font-size: 17.78px;">.NET Core</a> <a href="/tags/Accord-NET/" style="font-size: 15.56px;">Accord.NET</a> <a href="/tags/Analytics/" style="font-size: 14.44px;">Analytics</a> <a href="/tags/Audio/" style="font-size: 10px;">Audio</a> <a href="/tags/Benchmarking/" style="font-size: 10px;">Benchmarking</a> <a href="/tags/Chiron/" style="font-size: 10px;">Chiron</a> <a href="/tags/Classification/" style="font-size: 11.11px;">Classification</a> <a href="/tags/Cognitive-Services/" style="font-size: 11.11px;">Cognitive Services</a> <a href="/tags/Compiler/" style="font-size: 13.33px;">Compiler</a> <a href="/tags/Computer-Vision/" style="font-size: 11.11px;">Computer Vision</a> <a href="/tags/Cordova/" style="font-size: 10px;">Cordova</a> <a href="/tags/DTW/" style="font-size: 14.44px;">DTW</a> <a href="/tags/Data/" style="font-size: 16.67px;">Data</a> <a href="/tags/Database/" style="font-size: 11.11px;">Database</a> <a href="/tags/Decision-Trees/" style="font-size: 11.11px;">Decision Trees</a> <a href="/tags/Deedle/" style="font-size: 10px;">Deedle</a> <a href="/tags/Delegate/" style="font-size: 10px;">Delegate</a> <a href="/tags/Detection/" style="font-size: 10px;">Detection</a> <a href="/tags/Docker/" style="font-size: 10px;">Docker</a> <a href="/tags/Dynamic-Time-Warping/" style="font-size: 13.33px;">Dynamic Time Warping</a> <a href="/tags/EEG/" style="font-size: 10px;">EEG</a> <a href="/tags/Edges/" style="font-size: 10px;">Edges</a> <a href="/tags/Education/" style="font-size: 10px;">Education</a> <a href="/tags/Elmish/" style="font-size: 10px;">Elmish</a> <a href="/tags/EmguCV/" style="font-size: 10px;">EmguCV</a> <a href="/tags/Entropy/" style="font-size: 10px;">Entropy</a> <a href="/tags/F/" style="font-size: 20px;">F#</a> <a href="/tags/FParsec/" style="font-size: 12.22px;">FParsec</a> <a href="/tags/FSAdvent/" style="font-size: 10px;">FSAdvent</a> <a href="/tags/FSharp/" style="font-size: 20px;">FSharp</a> <a href="/tags/Fable/" style="font-size: 10px;">Fable</a> <a href="/tags/Faces/" style="font-size: 11.11px;">Faces</a> <a href="/tags/Filters/" style="font-size: 10px;">Filters</a> <a href="/tags/Http/" style="font-size: 11.11px;">Http</a> <a href="/tags/Images/" style="font-size: 12.22px;">Images</a> <a href="/tags/Ionide/" style="font-size: 10px;">Ionide</a> <a href="/tags/Kaggle/" style="font-size: 12.22px;">Kaggle</a> <a href="/tags/Keyboard/" style="font-size: 13.33px;">Keyboard</a> <a href="/tags/Legos/" style="font-size: 11.11px;">Legos</a> <a href="/tags/Logging/" style="font-size: 10px;">Logging</a> <a href="/tags/MLNet/" style="font-size: 16.67px;">MLNet</a> <a href="/tags/MSIL/" style="font-size: 12.22px;">MSIL</a> <a href="/tags/Machine-Learning/" style="font-size: 18.89px;">Machine Learning</a> <a href="/tags/MathNet/" style="font-size: 10px;">MathNet</a> <a href="/tags/Messaging/" style="font-size: 10px;">Messaging</a> <a href="/tags/Mobile/" style="font-size: 10px;">Mobile</a> <a href="/tags/Mono/" style="font-size: 10px;">Mono</a> <a href="/tags/Morse-Code/" style="font-size: 10px;">Morse Code</a> <a href="/tags/Mqtt/" style="font-size: 11.11px;">Mqtt</a> <a href="/tags/Nix/" style="font-size: 10px;">Nix</a> <a href="/tags/OpenCV/" style="font-size: 10px;">OpenCV</a> <a href="/tags/Optimization/" style="font-size: 10px;">Optimization</a> <a href="/tags/Parsing/" style="font-size: 12.22px;">Parsing</a> <a href="/tags/Performance/" style="font-size: 10px;">Performance</a> <a href="/tags/Presentations/" style="font-size: 10px;">Presentations</a> <a href="/tags/Propagator/" style="font-size: 10px;">Propagator</a> <a href="/tags/Racket/" style="font-size: 10px;">Racket</a> <a href="/tags/Regression/" style="font-size: 10px;">Regression</a> <a href="/tags/Rekognition/" style="font-size: 10px;">Rekognition</a> <a href="/tags/Robotics/" style="font-size: 10px;">Robotics</a> <a href="/tags/Rust/" style="font-size: 10px;">Rust</a> <a href="/tags/STEM/" style="font-size: 11.11px;">STEM</a> <a href="/tags/Scoring/" style="font-size: 10px;">Scoring</a> <a href="/tags/Search/" style="font-size: 10px;">Search</a> <a href="/tags/Serialization/" style="font-size: 10px;">Serialization</a> <a href="/tags/SignalR/" style="font-size: 10px;">SignalR</a> <a href="/tags/Signals/" style="font-size: 12.22px;">Signals</a> <a href="/tags/Similarity/" style="font-size: 11.11px;">Similarity</a> <a href="/tags/Sound/" style="font-size: 10px;">Sound</a> <a href="/tags/Statistics/" style="font-size: 13.33px;">Statistics</a> <a href="/tags/Tail-calls/" style="font-size: 10px;">Tail calls</a> <a href="/tags/Text/" style="font-size: 14.44px;">Text</a> <a href="/tags/Timeseries/" style="font-size: 10px;">Timeseries</a> <a href="/tags/Translation/" style="font-size: 10px;">Translation</a> <a href="/tags/VS-Code/" style="font-size: 10px;">VS Code</a> <a href="/tags/Web/" style="font-size: 10px;">Web</a> <a href="/tags/Webapi/" style="font-size: 11.11px;">Webapi</a> <a href="/tags/admin/" style="font-size: 11.11px;">admin</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/11/29/Mqtt-Server-FSharp-2/">Building an MQTT server in F# - Part 2</a>
          </li>
        
          <li>
            <a href="/2020/11/22/Mqtt-Server-FSharp-1/">Building an MQTT server in F# - Part 1</a>
          </li>
        
          <li>
            <a href="/2020/11/05/Rust-and-Dynamic-Time-Warping/">Rust and Dynamic Time Warping</a>
          </li>
        
          <li>
            <a href="/2020/10/25/Nix-For-Development/">Nix for Development</a>
          </li>
        
          <li>
            <a href="/2020/10/19/Microbit-Introduction/">Playing with the micro:bit</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 codesuji.com<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>